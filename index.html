<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JPPWRKM0PV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-JPPWRKM0PV');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrueCost JA - Jamaica Import Calculator</title>
    <meta name="description" content="Calculate import duties, taxes, and fees for vehicles and goods imported to Jamaica. Based on official 2025 Jamaica Customs rates.">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --jm-green: #009B3A; --jm-gold: #FED100; --primary: var(--jm-green); --primary-dark: #007A2E;
            --accent: var(--jm-gold); --dark: #0A0F14; --surface: #FFFFFF; --surface-alt: #F8F9FA;
            --border: #E4E7EB; --border-dark: #CBD2D9; --text-primary: #1A1D23; --text-secondary: #505867;
            --text-tertiary: #9DA4AE; --shadow-sm: 0 1px 2px rgba(0,0,0,0.04); --shadow-md: 0 4px 8px rgba(0,0,0,0.06);
            --radius-sm: 6px; --radius-md: 10px; --radius-lg: 14px; --radius-xl: 18px;
            --font-sans: 'Inter', -apple-system, system-ui, sans-serif; --font-mono: 'JetBrains Mono', monospace;
        }
        body { font-family: var(--font-sans); background: linear-gradient(180deg, #F1F5F9 0%, #FFFFFF 100%); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .app-container { max-width: 1400px; margin: 0 auto; padding: 2rem 1.5rem; }
        .header { text-align: center; margin-bottom: 2rem; }
        .logo { width: 180px; margin-bottom: 1rem; }
        h1 { font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; }
        .subtitle { font-size: 1rem; color: var(--text-secondary); }
        .badge-official { display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(0, 155, 58, 0.1); color: var(--primary); padding: 0.5rem 1rem; border-radius: 100px; font-size: 0.8125rem; font-weight: 600; margin-top: 1rem; }
        .tab-nav { display: flex; gap: 0.5rem; margin-bottom: 2rem; background: var(--surface); padding: 0.5rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); border: 1px solid var(--border); }
        .tab-btn { flex: 1; padding: 0.875rem 1.5rem; border: none; background: transparent; border-radius: var(--radius-md); font-family: var(--font-sans); font-size: 0.9375rem; font-weight: 600; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; }
        .tab-btn:hover { color: var(--text-primary); background: var(--surface-alt); }
        .tab-btn.active { background: var(--primary); color: white; }
        .calculator-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; }
        @media (max-width: 1024px) { .calculator-grid { grid-template-columns: 1fr; } }
        .card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-xl); padding: 2rem; box-shadow: var(--shadow-md); }
        .card-header { margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border); }
        .card-title { font-size: 1.125rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem; }
        .form-grid { display: grid; gap: 1.25rem; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        @media (max-width: 640px) { .form-row { grid-template-columns: 1fr; } }
        .form-group { display: flex; flex-direction: column; gap: 0.5rem; }
        label { font-size: 0.8125rem; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.03em; }
        input, select { font-family: var(--font-sans); font-size: 0.9375rem; padding: 0.75rem 1rem; border: 1.5px solid var(--border); border-radius: var(--radius-md); background: var(--surface); color: var(--text-primary); transition: all 0.2s; width: 100%; }
        input:focus, select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(0, 155, 58, 0.1); }
        .input-wrapper { position: relative; }
        .input-prefix { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--text-tertiary); font-weight: 500; }
        .input-wrapper input { padding-left: 2.25rem; }
        .toggle-group { display: flex; gap: 0.5rem; flex-wrap: wrap; }
        .toggle-option { display: flex; align-items: center; gap: 0.5rem; padding: 0.625rem 1rem; border: 1.5px solid var(--border); border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s; font-size: 0.875rem; font-weight: 500; background: var(--surface); }
        .toggle-option:hover { border-color: var(--border-dark); }
        .toggle-option.active { border-color: var(--primary); background: rgba(0, 155, 58, 0.05); color: var(--primary); }
        .toggle-option input { display: none; }
        .btn { font-family: var(--font-sans); font-size: 1rem; font-weight: 600; padding: 1rem 2rem; border: none; border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s; width: 100%; display: flex; align-items: center; justify-content: center; gap: 0.5rem; }
        .btn-primary { background: var(--primary); color: white; box-shadow: var(--shadow-sm); }
        .btn-primary:hover:not(:disabled) { background: var(--primary-dark); }
        .btn-primary:disabled { opacity: 0.6; cursor: not-allowed; }
        .results-section { margin-bottom: 1.5rem; }
        .section-title { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-tertiary); margin-bottom: 0.75rem; }
        .result-line { display: flex; justify-content: space-between; align-items: center; padding: 0.625rem 0; border-bottom: 1px solid var(--border); }
        .result-line:last-child { border-bottom: none; }
        .result-label { font-size: 0.9375rem; color: var(--text-secondary); display: flex; align-items: center; gap: 0.5rem; }
        .result-value { font-family: var(--font-mono); font-size: 0.9375rem; font-weight: 500; color: var(--text-primary); }
        .rate-tag { font-family: var(--font-mono); font-size: 0.6875rem; font-weight: 600; padding: 0.125rem 0.5rem; background: var(--surface-alt); border-radius: var(--radius-sm); color: var(--text-secondary); }
        .highlight-box { background: linear-gradient(135deg, var(--dark) 0%, #1A2530 100%); color: white; padding: 1.5rem; border-radius: var(--radius-lg); margin-top: 1.5rem; }
        .highlight-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--accent); font-weight: 700; margin-bottom: 0.5rem; }
        .highlight-amount { font-family: var(--font-mono); font-size: 2rem; font-weight: 700; margin-bottom: 0.25rem; }
        .highlight-sub { font-size: 1rem; opacity: 0.7; font-family: var(--font-mono); }
        .aggregate-badge { display: inline-flex; align-items: center; gap: 0.375rem; margin-top: 1rem; padding: 0.5rem 0.875rem; background: rgba(254, 209, 0, 0.15); border-radius: 100px; font-size: 0.8125rem; font-weight: 600; color: var(--accent); }
        .empty-state { text-align: center; padding: 3rem 2rem; color: var(--text-tertiary); }
        .empty-icon { font-size: 3rem; margin-bottom: 1rem; opacity: 0.5; }
        .spinner { width: 40px; height: 40px; border: 3px solid var(--border); border-top-color: var(--primary); border-radius: 50%; animation: spin 0.8s linear infinite; margin: 2rem auto; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .error-box { background: #FEF2F2; border: 1px solid #FECACA; color: #991B1B; padding: 1rem; border-radius: var(--radius-md); margin-top: 1rem; font-size: 0.875rem; }
        .info-box { background: rgba(0, 155, 58, 0.05); border: 1px solid rgba(0, 155, 58, 0.2); color: var(--primary-dark); padding: 0.875rem 1rem; border-radius: var(--radius-md); margin-bottom: 1.25rem; font-size: 0.8125rem; display: flex; align-items: flex-start; gap: 0.5rem; }
        .footer { text-align: center; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border); color: var(--text-tertiary); font-size: 0.875rem; }
        .footer a { color: var(--primary); text-decoration: none; }
        .vehicle-type-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.75rem; margin-bottom: 1.25rem; }
        @media (max-width: 900px) { .vehicle-type-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 640px) { .vehicle-type-grid { grid-template-columns: repeat(2, 1fr); } }
        .vehicle-type-btn { padding: 0.875rem 0.5rem; border: 1.5px solid var(--border); border-radius: var(--radius-md); background: var(--surface); cursor: pointer; transition: all 0.2s; text-align: center; font-size: 0.8125rem; font-weight: 500; color: var(--text-secondary); }
        .vehicle-type-btn:hover { border-color: var(--border-dark); background: var(--surface-alt); }
        .vehicle-type-btn.active { border-color: var(--primary); background: rgba(0, 155, 58, 0.08); color: var(--primary); }
        .vehicle-type-btn .icon { font-size: 1.5rem; margin-bottom: 0.375rem; display: block; }
        .ev-highlight { background: linear-gradient(135deg, #10B981 0%, #059669 100%); color: white; border-color: transparent; }
        .ev-highlight.active { background: linear-gradient(135deg, #047857 0%, #065F46 100%); }
        .freight-breakdown { background: var(--surface-alt); border-radius: var(--radius-md); padding: 0.75rem 1rem; margin-top: 0.5rem; font-size: 0.8125rem; }
        .freight-breakdown-title { font-weight: 600; color: var(--text-secondary); margin-bottom: 0.5rem; }
        .freight-item { display: flex; justify-content: space-between; padding: 0.25rem 0; color: var(--text-tertiary); }
        .freight-subtotal { display: flex; justify-content: space-between; padding: 0.375rem 0; color: var(--text-primary); font-weight: 600; border-top: 1px solid var(--border); margin-top: 0.25rem; }
        /* Vehicle search autocomplete */
        .search-wrapper { position: relative; }
        .search-results { position: absolute; top: 100%; left: 0; right: 0; background: var(--surface); border: 1.5px solid var(--primary); border-top: none; border-radius: 0 0 var(--radius-md) var(--radius-md); max-height: 220px; overflow-y: auto; z-index: 50; box-shadow: var(--shadow-md); }
        .search-result-item { padding: 0.625rem 1rem; cursor: pointer; font-size: 0.875rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); }
        .search-result-item:last-child { border-bottom: none; }
        .search-result-item:hover { background: rgba(0, 155, 58, 0.05); }
        .search-result-name { font-weight: 500; color: var(--text-primary); }
        .search-result-meta { font-family: var(--font-mono); font-size: 0.75rem; color: var(--text-tertiary); }
        .selected-vehicle-tag { display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(0, 155, 58, 0.08); border: 1px solid rgba(0, 155, 58, 0.2); color: var(--primary-dark); padding: 0.375rem 0.75rem; border-radius: 100px; font-size: 0.8125rem; font-weight: 500; margin-top: 0.25rem; }
        .selected-vehicle-tag button { background: none; border: none; color: var(--primary); cursor: pointer; font-size: 1rem; line-height: 1; padding: 0 0.25rem; }
        .transit-badge { display: inline-flex; align-items: center; gap: 0.375rem; margin-top: 0.75rem; padding: 0.5rem 0.875rem; background: rgba(0, 155, 58, 0.08); border-radius: 100px; font-size: 0.8125rem; font-weight: 500; color: var(--primary-dark); }

        /* â•â•â• HS CODE SEARCH â•â•â• */
        .hs-container { max-width: 1000px; margin: 0 auto; }
        .hs-search-bar { display: flex; gap: 0.75rem; margin-bottom: 1.5rem; }
        @media (max-width: 640px) { .hs-search-bar { flex-direction: column; } }
        .hs-search-bar input { flex: 1; padding: 1rem 1.25rem; font-size: 1rem; border: 2px solid var(--border); border-radius: var(--radius-lg); }
        .hs-search-bar input:focus { border-color: var(--primary); }
        .hs-search-bar select { padding: 1rem; font-size: 0.875rem; border: 2px solid var(--border); border-radius: var(--radius-lg); background: var(--surface); min-width: 180px; }
        .hs-stats { display: flex; gap: 0.75rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .hs-stat { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-md); padding: 0.75rem 1rem; font-size: 0.8125rem; color: var(--text-secondary); }
        .hs-stat strong { color: var(--primary); font-family: var(--font-mono); }
        .hs-results { display: grid; gap: 0.625rem; }
        .hs-card { background: var(--surface); border: 1.5px solid var(--border); border-radius: var(--radius-lg); padding: 1.25rem 1.5rem; transition: all 0.15s; cursor: default; }
        .hs-card:hover { border-color: var(--primary); box-shadow: 0 2px 8px rgba(0,155,58,0.08); }
        .hs-card-top { display: flex; justify-content: space-between; align-items: flex-start; gap: 1rem; margin-bottom: 0.5rem; }
        @media (max-width: 640px) { .hs-card-top { flex-direction: column; } }
        .hs-code-num { font-family: var(--font-mono); font-size: 1.0625rem; font-weight: 700; color: var(--primary); white-space: nowrap; }
        .hs-desc { font-size: 0.9375rem; font-weight: 500; color: var(--text-primary); }
        .hs-rates { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 0.5rem; }
        .hs-rate-pill { font-family: var(--font-mono); font-size: 0.75rem; font-weight: 600; padding: 0.25rem 0.75rem; border-radius: 100px; }
        .hs-rate-duty { background: rgba(0, 155, 58, 0.08); color: var(--primary-dark); border: 1px solid rgba(0,155,58,0.2); }
        .hs-rate-gct { background: rgba(234, 179, 8, 0.08); color: #92400E; border: 1px solid rgba(234,179,8,0.2); }
        .hs-rate-sct { background: rgba(239, 68, 68, 0.08); color: #991B1B; border: 1px solid rgba(239,68,68,0.2); }
        .hs-rate-free { background: rgba(16, 185, 129, 0.1); color: #065F46; border: 1px solid rgba(16,185,129,0.25); }
        .hs-cat-tag { font-size: 0.6875rem; font-weight: 600; padding: 0.2rem 0.625rem; border-radius: 100px; background: var(--surface-alt); color: var(--text-secondary); border: 1px solid var(--border); text-transform: uppercase; letter-spacing: 0.03em; }
        .hs-notes { font-size: 0.8125rem; color: var(--text-tertiary); margin-top: 0.375rem; font-style: italic; }
        .hs-pagination { display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 1.5rem; }
        .hs-pagination button { padding: 0.5rem 1.25rem; border: 1.5px solid var(--border); border-radius: var(--radius-md); background: var(--surface); font-family: var(--font-sans); font-size: 0.875rem; font-weight: 600; cursor: pointer; color: var(--text-secondary); transition: all 0.15s; }
        .hs-pagination button:hover:not(:disabled) { border-color: var(--primary); color: var(--primary); }
        .hs-pagination button:disabled { opacity: 0.4; cursor: not-allowed; }
        .hs-pagination span { font-size: 0.8125rem; color: var(--text-tertiary); }

        /* â•â•â• VESSEL TRACKER â•â•â• */
        .vt-container { max-width: 1000px; margin: 0 auto; }
        .vt-map-wrap { border-radius: var(--radius-xl); overflow: hidden; border: 1px solid var(--border); margin-bottom: 1.5rem; box-shadow: var(--shadow-md); background: var(--surface); }
        .vt-map-wrap iframe { width: 100%; height: 450px; border: none; display: block; }
        @media (max-width: 640px) { .vt-map-wrap iframe { height: 320px; } }
        .vt-info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; }
        @media (max-width: 768px) { .vt-info-grid { grid-template-columns: 1fr; } }
        .vt-port-card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 1.25rem 1.5rem; }
        .vt-port-card h3 { font-size: 1rem; font-weight: 700; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem; }
        .vt-port-card p { font-size: 0.8125rem; color: var(--text-secondary); line-height: 1.5; }
        .vt-detail-row { display: flex; justify-content: space-between; padding: 0.375rem 0; border-bottom: 1px solid var(--border); font-size: 0.8125rem; }
        .vt-detail-row:last-child { border-bottom: none; }
        .vt-detail-label { color: var(--text-secondary); }
        .vt-detail-value { font-weight: 600; color: var(--text-primary); }
        .vt-search-row { display: flex; gap: 0.75rem; margin-bottom: 1.5rem; }
        @media (max-width: 640px) { .vt-search-row { flex-direction: column; } }
        .vt-search-row input { flex: 1; padding: 0.875rem 1.25rem; font-size: 0.9375rem; border: 2px solid var(--border); border-radius: var(--radius-lg); }
        .vt-search-row input:focus { border-color: var(--primary); }
        .vt-search-row a { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.875rem 1.5rem; background: var(--primary); color: white; border-radius: var(--radius-lg); text-decoration: none; font-weight: 600; font-size: 0.875rem; white-space: nowrap; transition: 0.15s; }
        .vt-search-row a:hover { background: var(--primary-dark); }
        .vt-routes { display: grid; gap: 0.5rem; }
        .vt-route { display: grid; grid-template-columns: 1fr auto 1fr auto; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-md); font-size: 0.8125rem; }
        @media (max-width: 640px) { .vt-route { grid-template-columns: 1fr; } }
        .vt-route-port { font-weight: 600; color: var(--text-primary); }
        .vt-route-arrow { color: var(--primary); font-weight: 700; }
        .vt-route-time { font-family: var(--font-mono); color: var(--text-tertiary); font-size: 0.75rem; }
        .vt-disclaimer { font-size: 0.75rem; color: var(--text-tertiary); text-align: center; margin-top: 1rem; }
    </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7930761276898798"
     crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-7930761276898798">
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;
        const API_URL = 'https://web-production-c0bd0.up.railway.app';

        const SOURCE_COUNTRIES = [
            { code: 'US', name: 'United States', flag: 'ğŸ‡ºğŸ‡¸' },
            { code: 'UK', name: 'United Kingdom', flag: 'ğŸ‡¬ğŸ‡§' },
            { code: 'JP', name: 'Japan', flag: 'ğŸ‡¯ğŸ‡µ' },
            { code: 'CN', name: 'China', flag: 'ğŸ‡¨ğŸ‡³' },
            { code: 'DE', name: 'Germany', flag: 'ğŸ‡©ğŸ‡ª' },
            { code: 'CA', name: 'Canada', flag: 'ğŸ‡¨ğŸ‡¦' },
            { code: 'AE', name: 'UAE', flag: 'ğŸ‡¦ğŸ‡ª' },
            { code: 'KR', name: 'South Korea', flag: 'ğŸ‡°ğŸ‡·' },
            { code: 'PA', name: 'Panama', flag: 'ğŸ‡µğŸ‡¦' },
            { code: 'TT', name: 'Trinidad & Tobago', flag: 'ğŸ‡¹ğŸ‡¹' }
        ];

        const VEHICLE_TYPES = [
            { id: 'motor_car', name: 'Car / SUV', icon: 'ğŸš—', requiresCC: true, requiresWeight: false },
            { id: 'pickup', name: 'Pickup', icon: 'ğŸ›»', requiresCC: true, requiresWeight: true },
            { id: 'truck', name: 'Truck', icon: 'ğŸšš', requiresCC: true, requiresWeight: true },
            { id: 'bus', name: 'Bus', icon: 'ğŸšŒ', requiresCC: true, requiresSeats: true },
            { id: 'panel_van', name: 'Van', icon: 'ğŸš', requiresCC: true, requiresWeight: true },
            { id: 'motorcycle', name: 'Motorcycle', icon: 'ğŸï¸', requiresCC: true },
            { id: 'limousine', name: 'Limousine', icon: 'ğŸš™', requiresCC: true },
            { id: 'hearse', name: 'Hearse', icon: 'âš°ï¸', requiresCC: true, requiresWeight: true },
            { id: 'tractor_head', name: 'Tractor Head', icon: 'ğŸš›', requiresCC: true },
            { id: 'special_purpose', name: 'Special Purpose', icon: 'ğŸš’', requiresCC: true },
            { id: 'hybrid', name: 'Hybrid', icon: 'ğŸ”‹', requiresCC: true, isGreen: true },
            { id: 'electric', name: 'Electric', icon: 'âš¡', isGreen: true },
        ];

        const VEHICLE_SHIPPING = [
            { id: 'roro', name: 'RoRo', icon: 'ğŸš¢' },
            { id: 'container_20ft', name: '20ft Container', icon: 'ğŸ“¦' },
            { id: 'container_40ft', name: '40ft Container', icon: 'ğŸ“¦' }
        ];

        const INSURANCE_OPTIONS = [
            { id: 'none', name: 'None', icon: 'âœ•' },
            { id: 'total_loss', name: 'Total Loss (1%)', icon: 'ğŸ›¡ï¸' },
            { id: 'comprehensive', name: 'Full Cover (1.5%)', icon: 'ğŸ›¡ï¸' }
        ];

        const formatCurrency = (v, c = 'JMD') => c + ' $' + new Intl.NumberFormat('en-JM', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(v);

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // HS CODE DATABASE (client-side for instant search)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        const HS_DATA = [
            {c:"0207.14",d:"Frozen chicken cuts and offal",du:"260%",g:"0%",s:"0%",cat:"Food & Agriculture",n:"High protective tariff â€” Jamaica poultry protection"},
            {c:"0402.10",d:"Milk powder, fat â‰¤1.5%",du:"10%",g:"0%",s:"0%",cat:"Food & Agriculture",n:"Basic food - GCT exempt"},
            {c:"0901.11",d:"Coffee, not roasted, not decaffeinated",du:"15%",g:"15%",s:"0%",cat:"Food & Agriculture"},
            {c:"1006.30",d:"Semi-milled or wholly milled rice",du:"25%",g:"0%",s:"0%",cat:"Food & Agriculture",n:"Basic food"},
            {c:"1101.00",d:"Wheat or meslin flour",du:"15%",g:"0%",s:"0%",cat:"Food & Agriculture",n:"Basic food"},
            {c:"2002.10",d:"Tomatoes, whole or in pieces, prepared",du:"25%",g:"15%",s:"0%",cat:"Food & Agriculture"},
            {c:"2106.90",d:"Food preparations not elsewhere specified",du:"20%",g:"15%",s:"0%",cat:"Food & Agriculture"},
            {c:"2201.10",d:"Mineral water and aerated water",du:"20%",g:"15%",s:"0%",cat:"Beverages"},
            {c:"2202.10",d:"Sweetened or flavoured water (soft drinks)",du:"20%",g:"15%",s:"0%",cat:"Beverages"},
            {c:"2203.00",d:"Beer made from malt",du:"40%",g:"15%",s:"J$274.40/L",cat:"Alcohol",n:"Specific SCT rate per litre of absolute alcohol"},
            {c:"2204.21",d:"Wine of fresh grapes, in containers â‰¤2 litres",du:"40%",g:"15%",s:"J$274.40/L",cat:"Alcohol"},
            {c:"2208.30",d:"Whiskies",du:"40%",g:"15%",s:"J$274.40/L",cat:"Alcohol"},
            {c:"2208.40",d:"Rum and other spirits from sugar cane",du:"40%",g:"15%",s:"J$274.40/L",cat:"Alcohol"},
            {c:"2208.60",d:"Vodka",du:"40%",g:"15%",s:"J$274.40/L",cat:"Alcohol"},
            {c:"2402.20",d:"Cigarettes containing tobacco",du:"40%",g:"15%",s:"J$10,395/1000",cat:"Tobacco",n:"Very high specific SCT"},
            {c:"2523.29",d:"Portland cement (other)",du:"15%",g:"15%",s:"0%",cat:"Building Materials"},
            {c:"2710.12",d:"Motor gasoline (petrol)",du:"0%",g:"15%",s:"J$39.73/L",cat:"Fuel & Energy",n:"Specific SCT per litre"},
            {c:"2710.19",d:"Diesel fuel oil",du:"0%",g:"15%",s:"J$20.27/L",cat:"Fuel & Energy"},
            {c:"2711.12",d:"Propane, liquefied (cooking gas)",du:"5%",g:"0%",s:"0%",cat:"Fuel & Energy",n:"Basic necessity"},
            {c:"3004.90",d:"Medicaments in dosage form (pharmaceuticals)",du:"0%",g:"0%",s:"0%",cat:"Pharmaceuticals",n:"Duty-free, GCT-exempt"},
            {c:"3304.99",d:"Beauty or make-up preparations",du:"20%",g:"15%",s:"0%",cat:"Cosmetics"},
            {c:"3305.10",d:"Shampoos",du:"20%",g:"15%",s:"0%",cat:"Cosmetics"},
            {c:"3401.11",d:"Soap for toilet use",du:"20%",g:"15%",s:"0%",cat:"Cosmetics"},
            {c:"3402.20",d:"Cleaning/washing preparations (detergent)",du:"15%",g:"15%",s:"0%",cat:"Cosmetics"},
            {c:"4011.10",d:"New pneumatic rubber tyres for motor cars",du:"10%",g:"15%",s:"0%",cat:"Vehicles & Parts"},
            {c:"4407.10",d:"Lumber/timber (coniferous), sawn lengthwise",du:"5%",g:"15%",s:"0%",cat:"Building Materials"},
            {c:"4418.20",d:"Doors and frames of wood",du:"20%",g:"15%",s:"0%",cat:"Building Materials"},
            {c:"4818.10",d:"Toilet paper",du:"20%",g:"15%",s:"0%",cat:"Household"},
            {c:"4901.99",d:"Printed books, brochures, leaflets",du:"0%",g:"0%",s:"0%",cat:"Books & Education",n:"Books duty-free and GCT-exempt"},
            {c:"6109.10",d:"T-shirts, singlets (cotton, knitted)",du:"20%",g:"15%",s:"0%",cat:"Clothing"},
            {c:"6110.20",d:"Jerseys, pullovers, cardigans (cotton)",du:"20%",g:"15%",s:"0%",cat:"Clothing"},
            {c:"6203.42",d:"Men's trousers/shorts (cotton)",du:"20%",g:"15%",s:"0%",cat:"Clothing"},
            {c:"6204.62",d:"Women's trousers/shorts (cotton)",du:"20%",g:"15%",s:"0%",cat:"Clothing"},
            {c:"6205.20",d:"Men's dress shirts (cotton, not knitted)",du:"20%",g:"15%",s:"0%",cat:"Clothing"},
            {c:"6302.31",d:"Bed linen (cotton)",du:"20%",g:"15%",s:"0%",cat:"Household"},
            {c:"6402.19",d:"Sports footwear (rubber/plastic soles)",du:"25%",g:"15%",s:"0%",cat:"Footwear"},
            {c:"6403.99",d:"Leather upper footwear",du:"25%",g:"15%",s:"0%",cat:"Footwear"},
            {c:"6404.11",d:"Sports shoes / sneakers / trainers (textile upper, rubber sole)",du:"25%",g:"15%",s:"0%",cat:"Footwear"},
            {c:"6907.21",d:"Ceramic tiles and paving (glazed)",du:"15%",g:"15%",s:"0%",cat:"Building Materials"},
            {c:"6910.10",d:"Porcelain sinks, baths, toilets",du:"20%",g:"15%",s:"0%",cat:"Building Materials"},
            {c:"7210.49",d:"Galvanized iron/steel sheets (roofing)",du:"5%",g:"15%",s:"0%",cat:"Building Materials"},
            {c:"7213.91",d:"Steel bars and rods (rebar for construction)",du:"5%",g:"15%",s:"0%",cat:"Building Materials"},
            {c:"8415.10",d:"Air conditioning machines, window/wall type",du:"20%",g:"15%",s:"0%",cat:"Appliances"},
            {c:"8418.10",d:"Combined refrigerator-freezer",du:"20%",g:"15%",s:"0%",cat:"Appliances"},
            {c:"8418.21",d:"Household refrigerators (compression type)",du:"20%",g:"15%",s:"0%",cat:"Appliances"},
            {c:"8418.40",d:"Household freezers (upright)",du:"20%",g:"15%",s:"0%",cat:"Appliances"},
            {c:"8443.32",d:"Printing machines (printers), inkjet/laser",du:"5%",g:"15%",s:"0%",cat:"Electronics"},
            {c:"8450.11",d:"Household washing machines (fully automatic)",du:"20%",g:"15%",s:"0%",cat:"Appliances"},
            {c:"8451.21",d:"Household clothes dryers",du:"20%",g:"15%",s:"0%",cat:"Appliances"},
            {c:"8471.30",d:"Laptop / notebook computers",du:"0%",g:"15%",s:"0%",cat:"Electronics",n:"Computers are duty-free"},
            {c:"8471.41",d:"Desktop computers",du:"0%",g:"15%",s:"0%",cat:"Electronics",n:"Duty-free"},
            {c:"8473.30",d:"Computer parts and accessories",du:"0%",g:"15%",s:"0%",cat:"Electronics",n:"Duty-free"},
            {c:"8507.60",d:"Lithium-ion batteries",du:"5%",g:"15%",s:"0%",cat:"Electronics"},
            {c:"8516.50",d:"Microwave ovens",du:"20%",g:"15%",s:"0%",cat:"Appliances"},
            {c:"8516.60",d:"Electric cookers, cooking plates, grills",du:"20%",g:"15%",s:"0%",cat:"Appliances"},
            {c:"8516.79",d:"Electro-thermic appliances (kettles, toasters)",du:"20%",g:"15%",s:"0%",cat:"Appliances"},
            {c:"8517.12",d:"Mobile phones / smartphones",du:"5%",g:"15%",s:"0%",cat:"Electronics",n:"Very commonly imported"},
            {c:"8517.62",d:"Network routers, switches, modems",du:"5%",g:"15%",s:"0%",cat:"Electronics"},
            {c:"8518.21",d:"Loudspeakers in enclosures (speakers)",du:"20%",g:"15%",s:"0%",cat:"Electronics"},
            {c:"8525.80",d:"Television cameras, digital cameras",du:"10%",g:"15%",s:"0%",cat:"Electronics"},
            {c:"8528.72",d:"Television receivers (flat panel, LCD/LED/OLED TV)",du:"20%",g:"15%",s:"0%",cat:"Electronics"},
            {c:"8541.40",d:"Photovoltaic cells (solar panels), assembled",du:"0%",g:"0%",s:"0%",cat:"Energy",n:"Solar panels duty-free and GCT-exempt"},
            {c:"9504.50",d:"Video game consoles (PlayStation, Xbox, Switch)",du:"20%",g:"15%",s:"0%",cat:"Electronics"},
            {c:"8703.21",d:"Motor cars, spark-ignition engine â‰¤1000cc",du:"0%",g:"15%",s:"Varies",cat:"Vehicles",n:"Lowest duty bracket for gas cars"},
            {c:"8703.22",d:"Motor cars, spark-ignition engine 1001-1500cc",du:"10%",g:"15%",s:"Varies",cat:"Vehicles"},
            {c:"8703.23",d:"Motor cars, spark-ignition engine 1501-3000cc",du:"20-30%",g:"15%",s:"Varies",cat:"Vehicles",n:"1501-2000=20%, 2001-3000=30%"},
            {c:"8703.24",d:"Motor cars, spark-ignition engine >3000cc",du:"40%",g:"15%",s:"Varies",cat:"Vehicles",n:"Highest duty bracket"},
            {c:"8703.31",d:"Motor cars, diesel engine â‰¤1500cc",du:"0%",g:"15%",s:"Varies",cat:"Vehicles"},
            {c:"8703.32",d:"Motor cars, diesel engine 1501-2500cc",du:"10-20%",g:"15%",s:"Varies",cat:"Vehicles"},
            {c:"8703.33",d:"Motor cars, diesel engine >2500cc",du:"30-40%",g:"15%",s:"Varies",cat:"Vehicles"},
            {c:"8703.40",d:"Motor cars, electric (BEV / battery electric)",du:"10%",g:"0%",s:"0%",cat:"Vehicles",n:"EV incentive: 0% GCT, 0% SCT, 11% aggregate for new"},
            {c:"8703.50",d:"Motor cars, plug-in hybrid electric (PHEV)",du:"10%",g:"15%",s:"0%",cat:"Vehicles",n:"Hybrid incentive: 0% SCTA"},
            {c:"8703.60",d:"Motor cars, hybrid (non plug-in), spark-ignition",du:"10%",g:"15%",s:"0%",cat:"Vehicles",n:"0% SCTA, ~39% aggregate"},
            {c:"8704.21",d:"Pickup trucks / goods vehicles â‰¤5 tonnes",du:"10-30%",g:"15%",s:"Varies",cat:"Vehicles"},
            {c:"8704.22",d:"Trucks / goods vehicles 5-20 tonnes",du:"10-30%",g:"15%",s:"Varies",cat:"Vehicles"},
            {c:"8711.20",d:"Motorcycles, 50-250cc",du:"20%",g:"15%",s:"Varies",cat:"Vehicles"},
            {c:"8711.30",d:"Motorcycles, 250-500cc",du:"20%",g:"15%",s:"Varies",cat:"Vehicles"},
            {c:"8711.50",d:"Motorcycles, >800cc",du:"20%",g:"15%",s:"Varies",cat:"Vehicles"},
            {c:"8702.10",d:"Buses, diesel, >10 persons",du:"0-20%",g:"15%",s:"Varies",cat:"Vehicles",n:"Franchise buses may qualify for reduced rates"},
            {c:"8708.10",d:"Bumpers and parts for motor vehicles",du:"10%",g:"15%",s:"0%",cat:"Vehicles & Parts"},
            {c:"8708.29",d:"Body parts for motor vehicles",du:"10%",g:"15%",s:"0%",cat:"Vehicles & Parts"},
            {c:"8708.30",d:"Brakes and parts for motor vehicles",du:"10%",g:"15%",s:"0%",cat:"Vehicles & Parts"},
            {c:"8708.40",d:"Gear boxes / transmissions for motor vehicles",du:"10%",g:"15%",s:"0%",cat:"Vehicles & Parts"},
            {c:"8708.99",d:"Vehicle parts not elsewhere specified",du:"10%",g:"15%",s:"0%",cat:"Vehicles & Parts"},
            {c:"9401.71",d:"Seats with metal frames, upholstered (sofas)",du:"20%",g:"15%",s:"0%",cat:"Furniture"},
            {c:"9403.40",d:"Wooden kitchen furniture",du:"20%",g:"15%",s:"0%",cat:"Furniture"},
            {c:"9403.50",d:"Wooden bedroom furniture",du:"20%",g:"15%",s:"0%",cat:"Furniture"},
            {c:"9403.60",d:"Other wooden furniture",du:"20%",g:"15%",s:"0%",cat:"Furniture"},
            {c:"9404.21",d:"Mattresses of cellular rubber (foam)",du:"20%",g:"15%",s:"0%",cat:"Furniture"},
            {c:"9503.00",d:"Toys, scale models, puzzles",du:"20%",g:"15%",s:"0%",cat:"Toys & Sports"},
            {c:"9619.00",d:"Sanitary pads, tampons, diapers",du:"0%",g:"0%",s:"0%",cat:"Household",n:"Tax-exempt essential items"},
        ];
        const HS_CATS = [...new Set(HS_DATA.map(h => h.cat))].sort();

        function HSCodeSearch() {
            const [query, setQuery] = useState('');
            const [catFilter, setCatFilter] = useState('');
            const [page, setPage] = useState(1);
            const perPage = 15;

            const filtered = HS_DATA.filter(h => {
                const q = query.toLowerCase();
                const matchQ = !q || h.c.toLowerCase().includes(q) || h.d.toLowerCase().includes(q) || (h.n || '').toLowerCase().includes(q) || h.cat.toLowerCase().includes(q);
                const matchCat = !catFilter || h.cat === catFilter;
                return matchQ && matchCat;
            });
            const totalPages = Math.ceil(filtered.length / perPage);
            const pageResults = filtered.slice((page - 1) * perPage, page * perPage);

            const handleSearch = (val) => { setQuery(val); setPage(1); };
            const handleCat = (val) => { setCatFilter(val); setPage(1); };

            return (
                <div className="hs-container">
                    <div className="card" style={{ marginBottom: '1.5rem' }}>
                        <div className="card-header">
                            <h2 className="card-title">ğŸ“‹ Jamaica HS Code / Tariff Lookup</h2>
                        </div>
                        <p style={{ color: 'var(--text-secondary)', fontSize: '0.875rem', marginBottom: '1rem' }}>
                            Search Jamaica's Harmonized System tariff codes to find import duty rates, GCT, and SCT for any product. 
                            Enter an HS code number (e.g. 8703) or describe the product (e.g. "laptop", "chicken", "tyres").
                        </p>
                        <div className="hs-search-bar">
                            <input type="text" placeholder="Search by HS code or product description..." value={query} onChange={e => handleSearch(e.target.value)} autoFocus />
                            <select value={catFilter} onChange={e => handleCat(e.target.value)}>
                                <option value="">All Categories</option>
                                {HS_CATS.map(c => <option key={c} value={c}>{c}</option>)}
                            </select>
                        </div>
                        <div className="hs-stats">
                            <span className="hs-stat"><strong>{filtered.length}</strong> results{query && ` for "${query}"`}</span>
                            <span className="hs-stat"><strong>{HS_DATA.length}</strong> total codes</span>
                            <span className="hs-stat"><strong>{HS_CATS.length}</strong> categories</span>
                        </div>
                    </div>

                    <div className="hs-results">
                        {pageResults.map((h, i) => (
                            <div className="hs-card" key={i}>
                                <div className="hs-card-top">
                                    <div>
                                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', flexWrap: 'wrap' }}>
                                            <span className="hs-code-num">{h.c}</span>
                                            <span className="hs-cat-tag">{h.cat}</span>
                                        </div>
                                        <div className="hs-desc" style={{ marginTop: '0.375rem' }}>{h.d}</div>
                                    </div>
                                </div>
                                <div className="hs-rates">
                                    <span className={`hs-rate-pill ${h.du === '0%' ? 'hs-rate-free' : 'hs-rate-duty'}`}>Duty: {h.du === '0%' ? 'FREE' : h.du}</span>
                                    <span className={`hs-rate-pill ${h.g === '0%' ? 'hs-rate-free' : 'hs-rate-gct'}`}>GCT: {h.g === '0%' ? 'EXEMPT' : h.g}</span>
                                    {h.s !== '0%' && <span className="hs-rate-pill hs-rate-sct">SCT: {h.s}</span>}
                                </div>
                                {h.n && <div className="hs-notes">ğŸ’¡ {h.n}</div>}
                            </div>
                        ))}
                        {pageResults.length === 0 && (
                            <div className="empty-state">
                                <div className="empty-icon">ğŸ”</div>
                                <p>No HS codes found for "{query}". Try a different search term or category.</p>
                            </div>
                        )}
                    </div>

                    {totalPages > 1 && (
                        <div className="hs-pagination">
                            <button onClick={() => setPage(p => Math.max(1, p-1))} disabled={page <= 1}>â† Previous</button>
                            <span>Page {page} of {totalPages}</span>
                            <button onClick={() => setPage(p => Math.min(totalPages, p+1))} disabled={page >= totalPages}>Next â†’</button>
                        </div>
                    )}
                </div>
            );
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // VESSEL TRACKER COMPONENT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function VesselTracker() {
            const [vesselSearch, setVesselSearch] = useState('');
            const trackUrl = vesselSearch.trim()
                ? `https://www.marinetraffic.com/en/ais/home/centerx/-76.8/centery:17.97/zoom:10/search:${encodeURIComponent(vesselSearch.trim())}`
                : null;

            return (
                <div className="vt-container">
                    <div className="card" style={{ marginBottom: '1.5rem' }}>
                        <div className="card-header">
                            <h2 className="card-title">ğŸš¢ Jamaica Vessel Tracker</h2>
                        </div>
                        <p style={{ color: 'var(--text-secondary)', fontSize: '0.875rem', marginBottom: '1rem' }}>
                            Track vessels arriving at Jamaica's ports. Monitor your vehicle or cargo shipment in real time.
                            The map below shows live vessel positions around Kingston Harbour and Montego Bay.
                        </p>
                    </div>

                    <div className="vt-map-wrap">
                        <iframe 
                            src="https://www.marinetraffic.com/en/ais/embed/zoom:10/centery:17.97/centerx:-76.8/maptype:1/shownames:true/mmsi:0/shipid:0/fleet:/fleet_id:/vtypes:/showmenu:false/remember:false"
                            title="Live vessel map â€” Kingston Harbour, Jamaica"
                            loading="lazy"
                        ></iframe>
                    </div>

                    <div className="vt-search-row">
                        <input 
                            type="text" 
                            placeholder="Search vessel name or IMO number..." 
                            value={vesselSearch} 
                            onChange={e => setVesselSearch(e.target.value)}
                            onKeyDown={e => { if (e.key === 'Enter' && trackUrl) window.open(trackUrl, '_blank'); }}
                        />
                        <a href={trackUrl || '#'} target="_blank" rel="noopener noreferrer" onClick={e => { if (!trackUrl) e.preventDefault(); }}>
                            ğŸ” Track Vessel
                        </a>
                    </div>

                    <div className="vt-info-grid">
                        <div className="vt-port-card">
                            <h3>ğŸ—ï¸ Kingston Container Terminal (KCT)</h3>
                            <div className="vt-detail-row"><span className="vt-detail-label">Location</span><span className="vt-detail-value">Kingston Harbour</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">Operator</span><span className="vt-detail-value">Kingston Freeport Terminal Ltd (KFTL)</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">Capacity</span><span className="vt-detail-value">3.2M TEUs/year</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">UN/LOCODE</span><span className="vt-detail-value">JMKIN</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">Type</span><span className="vt-detail-value">Container, RoRo, General Cargo</span></div>
                        </div>
                        <div className="vt-port-card">
                            <h3>âš“ Gordon Cay / Newport West</h3>
                            <div className="vt-detail-row"><span className="vt-detail-label">Location</span><span className="vt-detail-value">Kingston Harbour (West)</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">Operator</span><span className="vt-detail-value">Port Authority of Jamaica</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">Primary Use</span><span className="vt-detail-value">Vehicle imports (RoRo berth)</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">UN/LOCODE</span><span className="vt-detail-value">JMKIN</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">Note</span><span className="vt-detail-value">Primary RoRo vehicle discharge point</span></div>
                        </div>
                        <div className="vt-port-card">
                            <h3>ğŸš¢ Montego Bay Freeport</h3>
                            <div className="vt-detail-row"><span className="vt-detail-label">Location</span><span className="vt-detail-value">Montego Bay, St. James</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">Operator</span><span className="vt-detail-value">Port Authority of Jamaica</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">Primary Use</span><span className="vt-detail-value">Cruise, cargo, freeport operations</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">UN/LOCODE</span><span className="vt-detail-value">JMMBJ</span></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">Note</span><span className="vt-detail-value">Second busiest port</span></div>
                        </div>
                        <div className="vt-port-card">
                            <h3>ğŸ“‹ Port Resources</h3>
                            <p style={{ marginBottom: '0.5rem' }}>Useful links for tracking your import:</p>
                            <div className="vt-detail-row"><span className="vt-detail-label">Customs</span><a className="vt-detail-value" href="https://www.jacustoms.gov.jm" target="_blank" rel="noopener noreferrer" style={{color:'var(--primary)',textDecoration:'none'}}>jacustoms.gov.jm â†’</a></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">Port Authority</span><a className="vt-detail-value" href="https://www.portjam.com" target="_blank" rel="noopener noreferrer" style={{color:'var(--primary)',textDecoration:'none'}}>portjam.com â†’</a></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">Vessel Finder</span><a className="vt-detail-value" href="https://www.vesselfinder.com" target="_blank" rel="noopener noreferrer" style={{color:'var(--primary)',textDecoration:'none'}}>vesselfinder.com â†’</a></div>
                            <div className="vt-detail-row"><span className="vt-detail-label">MarineTraffic</span><a className="vt-detail-value" href="https://www.marinetraffic.com" target="_blank" rel="noopener noreferrer" style={{color:'var(--primary)',textDecoration:'none'}}>marinetraffic.com â†’</a></div>
                        </div>
                    </div>

                    <div className="card">
                        <div className="card-header"><h2 className="card-title">ğŸ—ºï¸ Common Shipping Routes to Jamaica</h2></div>
                        <div className="vt-routes">
                            <div className="vt-route"><span className="vt-route-port">ğŸ‡ºğŸ‡¸ Miami / Jacksonville</span><span className="vt-route-arrow">â†’</span><span className="vt-route-port">ğŸ‡¯ğŸ‡² Kingston</span><span className="vt-route-time">5-10 days</span></div>
                            <div className="vt-route"><span className="vt-route-port">ğŸ‡¯ğŸ‡µ Yokohama / Nagoya</span><span className="vt-route-arrow">â†’</span><span className="vt-route-port">ğŸ‡¯ğŸ‡² Kingston</span><span className="vt-route-time">42-56 days</span></div>
                            <div className="vt-route"><span className="vt-route-port">ğŸ‡¬ğŸ‡§ Southampton / Tilbury</span><span className="vt-route-arrow">â†’</span><span className="vt-route-port">ğŸ‡¯ğŸ‡² Kingston</span><span className="vt-route-time">14-21 days</span></div>
                            <div className="vt-route"><span className="vt-route-port">ğŸ‡¨ğŸ‡³ Shanghai / Ningbo</span><span className="vt-route-arrow">â†’</span><span className="vt-route-port">ğŸ‡¯ğŸ‡² Kingston</span><span className="vt-route-time">35-49 days</span></div>
                            <div className="vt-route"><span className="vt-route-port">ğŸ‡©ğŸ‡ª Hamburg / Bremerhaven</span><span className="vt-route-arrow">â†’</span><span className="vt-route-port">ğŸ‡¯ğŸ‡² Kingston</span><span className="vt-route-time">16-24 days</span></div>
                            <div className="vt-route"><span className="vt-route-port">ğŸ‡°ğŸ‡· Busan / Incheon</span><span className="vt-route-arrow">â†’</span><span className="vt-route-port">ğŸ‡¯ğŸ‡² Kingston</span><span className="vt-route-time">38-52 days</span></div>
                            <div className="vt-route"><span className="vt-route-port">ğŸ‡¦ğŸ‡ª Jebel Ali (Dubai)</span><span className="vt-route-arrow">â†’</span><span className="vt-route-port">ğŸ‡¯ğŸ‡² Kingston</span><span className="vt-route-time">28-42 days</span></div>
                            <div className="vt-route"><span className="vt-route-port">ğŸ‡¨ğŸ‡¦ Toronto / Montreal</span><span className="vt-route-arrow">â†’</span><span className="vt-route-port">ğŸ‡¯ğŸ‡² Kingston</span><span className="vt-route-time">10-18 days</span></div>
                            <div className="vt-route"><span className="vt-route-port">ğŸ‡¹ğŸ‡¹ Port of Spain</span><span className="vt-route-arrow">â†’</span><span className="vt-route-port">ğŸ‡¯ğŸ‡² Kingston</span><span className="vt-route-time">3-7 days</span></div>
                            <div className="vt-route"><span className="vt-route-port">ğŸ‡µğŸ‡¦ ColÃ³n / Balboa</span><span className="vt-route-arrow">â†’</span><span className="vt-route-port">ğŸ‡¯ğŸ‡² Kingston</span><span className="vt-route-time">2-5 days</span></div>
                        </div>
                    </div>
                    <p className="vt-disclaimer">Live vessel data provided by MarineTraffic. Positions may be delayed by up to 60 minutes for free tracking. For real-time tracking, use the vessel search above.</p>
                </div>
            );
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function useDebounce(value, delay) {
            const [debounced, setDebounced] = useState(value);
            useEffect(() => {
                const t = setTimeout(() => setDebounced(value), delay);
                return () => clearTimeout(t);
            }, [value, delay]);
            return debounced;
        }

        function App() {
            const [activeTab, setActiveTab] = useState('vehicle');
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState(null);
            const [result, setResult] = useState(null);
            const [categories, setCategories] = useState([]);
            const [countryPorts, setCountryPorts] = useState({});

            const [vehicleForm, setVehicleForm] = useState({
                fob_usd: '', origin_country: 'US', vehicle_type: 'motor_car', fuel_type: 'gas',
                engine_cc: '', unladen_weight_kg: '', passenger_seats: '', is_new: true,
                is_franchise: false, motorcycle_purpose: 'leisure', vehicle_shipping_method: 'roro',
                make_model: '', departure_port: '', insurance_type: 'total_loss',
            });

            const [goodsForm, setGoodsForm] = useState({
                fob_usd: '', weight_kg: '', origin_country: 'US', category: 'general', shipping_method: 'air'
            });

            // Vehicle search state
            const [searchQuery, setSearchQuery] = useState('');
            const [searchResults, setSearchResults] = useState([]);
            const [showSearchResults, setShowSearchResults] = useState(false);
            const [selectedVehicle, setSelectedVehicle] = useState(null);
            const searchRef = useRef(null);
            const debouncedSearch = useDebounce(searchQuery, 300);

            useEffect(() => {
                fetch(API_URL + '/categories').then(r => r.json()).then(d => setCategories(d.categories || [])).catch(console.error);
                fetch(API_URL + '/source-countries').then(r => r.json()).then(d => {
                    const portMap = {};
                    (d.countries || []).forEach(c => { portMap[c.code] = c.ports || []; });
                    setCountryPorts(portMap);
                }).catch(console.error);
            }, []);

            // Vehicle search
            useEffect(() => {
                if (debouncedSearch.length >= 2) {
                    fetch(API_URL + '/vehicle-search?q=' + encodeURIComponent(debouncedSearch))
                        .then(r => r.json())
                        .then(d => { setSearchResults(d.results || []); setShowSearchResults(true); })
                        .catch(() => setSearchResults([]));
                } else {
                    setSearchResults([]);
                    setShowSearchResults(false);
                }
            }, [debouncedSearch]);

            // Close search results on outside click
            useEffect(() => {
                const handleClick = (e) => { if (searchRef.current && !searchRef.current.contains(e.target)) setShowSearchResults(false); };
                document.addEventListener('mousedown', handleClick);
                return () => document.removeEventListener('mousedown', handleClick);
            }, []);

            const selectVehicle = (v) => {
                setSelectedVehicle(v);
                setSearchQuery('');
                setShowSearchResults(false);
                setVehicleForm(p => ({ ...p, make_model: v.name }));
            };

            const clearSelectedVehicle = () => {
                setSelectedVehicle(null);
                setVehicleForm(p => ({ ...p, make_model: '' }));
            };

            const handleVehicleChange = (e) => {
                const { name, value } = e.target;
                setVehicleForm(p => {
                    const updated = { ...p, [name]: value };
                    // Reset departure_port when country changes
                    if (name === 'origin_country') updated.departure_port = '';
                    return updated;
                });
            };

            const handleGoodsChange = (e) => {
                const { name, value } = e.target;
                setGoodsForm(p => ({ ...p, [name]: value }));
            };

            const handleVehicleSubmit = async (e) => {
                e.preventDefault();
                setLoading(true); setError(null);
                const vType = VEHICLE_TYPES.find(v => v.id === vehicleForm.vehicle_type);
                const payload = {
                    fob_usd: parseFloat(vehicleForm.fob_usd),
                    weight_kg: vType?.requiresWeight ? parseFloat(vehicleForm.unladen_weight_kg) : 1500,
                    category: 'vehicle', shipping_method: 'sea',
                    origin_country: vehicleForm.origin_country, vehicle_type: vehicleForm.vehicle_type,
                    fuel_type: vehicleForm.fuel_type, is_new: vehicleForm.is_new,
                    is_franchise: vehicleForm.is_franchise, vehicle_shipping_method: vehicleForm.vehicle_shipping_method,
                    insurance_type: vehicleForm.insurance_type || 'total_loss',
                };
                if (vehicleForm.make_model) payload.make_model = vehicleForm.make_model;
                if (vehicleForm.departure_port) payload.departure_port = vehicleForm.departure_port;
                if (selectedVehicle) {
                    payload.vehicle_m3 = selectedVehicle.m3;
                    payload.vehicle_height_m = selectedVehicle.height;
                }
                if (vehicleForm.engine_cc) payload.engine_cc = parseInt(vehicleForm.engine_cc);
                if (vType?.requiresSeats && vehicleForm.passenger_seats) payload.passenger_seats = parseInt(vehicleForm.passenger_seats);
                if (vehicleForm.vehicle_type === 'motorcycle') payload.motorcycle_purpose = vehicleForm.motorcycle_purpose;

                try {
                    const res = await fetch(API_URL + '/calculate', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!res.ok) throw new Error((await res.json()).detail || 'Failed');
                    setResult(await res.json());
                } catch (err) { setError(err.message); } finally { setLoading(false); }
            };

            const handleGoodsSubmit = async (e) => {
                e.preventDefault();
                setLoading(true); setError(null);
                const payload = {
                    fob_usd: parseFloat(goodsForm.fob_usd), weight_kg: parseFloat(goodsForm.weight_kg),
                    category: goodsForm.category, shipping_method: goodsForm.shipping_method, origin_country: goodsForm.origin_country
                };
                try {
                    const res = await fetch(API_URL + '/calculate', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!res.ok) throw new Error((await res.json()).detail || 'Failed');
                    setResult(await res.json());
                } catch (err) { setError(err.message); } finally { setLoading(false); }
            };

            const currentVehicleType = VEHICLE_TYPES.find(v => v.id === vehicleForm.vehicle_type);
            const currentPorts = countryPorts[vehicleForm.origin_country] || [];
            const fb = result?.freight_breakdown || {};

            return (
                <div className="app-container">
                    <header className="header">
                        <img src="index.png" alt="TrueCost JA" className="logo" />
                        <h1>Jamaica Import Calculator</h1>
                        <p className="subtitle">Calculate duties, taxes & fees for Jamaica imports</p>
                        <div className="badge-official">âœ“ Based on Official 2025 Jamaica Customs Rates</div>
                    </header>

                    <div className="tab-nav">
                        <button className={'tab-btn ' + (activeTab === 'vehicle' ? 'active' : '')} onClick={() => { setActiveTab('vehicle'); setResult(null); }}>ğŸš— Vehicle Import</button>
                        <button className={'tab-btn ' + (activeTab === 'goods' ? 'active' : '')} onClick={() => { setActiveTab('goods'); setResult(null); }}>ğŸ“¦ General Goods</button>
                        <button className={'tab-btn ' + (activeTab === 'hscodes' ? 'active' : '')} onClick={() => { setActiveTab('hscodes'); setResult(null); }}>ğŸ“‹ HS Codes</button>
                        <button className={'tab-btn ' + (activeTab === 'vessels' ? 'active' : '')} onClick={() => { setActiveTab('vessels'); setResult(null); }}>ğŸš¢ Vessel Tracker</button>
                    </div>

                    {(activeTab === 'vehicle' || activeTab === 'goods') && (
                    <div className="calculator-grid">
                        <div className="card">
                            <div className="card-header"><h2 className="card-title">{activeTab === 'vehicle' ? 'ğŸš— Vehicle Details' : 'ğŸ“¦ Shipment Details'}</h2></div>

                            {activeTab === 'vehicle' ? (
                                <form onSubmit={handleVehicleSubmit} className="form-grid">
                                    <div className="form-group">
                                        <label>Vehicle Type</label>
                                        <div className="vehicle-type-grid">
                                            {VEHICLE_TYPES.map(vt => (
                                                <button key={vt.id} type="button" className={'vehicle-type-btn ' + (vehicleForm.vehicle_type === vt.id ? 'active ' : '') + (vt.isGreen ? 'ev-highlight' : '')} onClick={() => setVehicleForm(p => ({ ...p, vehicle_type: vt.id }))}>
                                                    <span className="icon">{vt.icon}</span>{vt.name}
                                                </button>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Vehicle Make/Model Search */}
                                    <div className="form-group">
                                        <label>Make & Model <span style={{fontWeight:400,textTransform:'none',letterSpacing:0}}>(optional â€” auto-fills M3)</span></label>
                                        {selectedVehicle ? (
                                            <div className="selected-vehicle-tag">
                                                ğŸš˜ {selectedVehicle.name} â€” {selectedVehicle.m3} mÂ³ â€¢ {selectedVehicle.category_label}
                                                <button type="button" onClick={clearSelectedVehicle}>Ã—</button>
                                            </div>
                                        ) : (
                                            <div className="search-wrapper" ref={searchRef}>
                                                <input type="text" value={searchQuery} onChange={e => setSearchQuery(e.target.value)} onFocus={() => searchResults.length && setShowSearchResults(true)} placeholder="e.g. Toyota Corolla, Honda CR-V..." autoComplete="off" />
                                                {showSearchResults && searchResults.length > 0 && (
                                                    <div className="search-results">
                                                        {searchResults.map((v, i) => (
                                                            <div key={i} className="search-result-item" onClick={() => selectVehicle(v)}>
                                                                <span className="search-result-name">{v.name}</span>
                                                                <span className="search-result-meta">{v.m3} mÂ³ â€¢ {v.category_label}</span>
                                                            </div>
                                                        ))}
                                                    </div>
                                                )}
                                            </div>
                                        )}
                                    </div>

                                    <div className="form-row">
                                        <div className="form-group">
                                            <label>Shipping From</label>
                                            <select name="origin_country" value={vehicleForm.origin_country} onChange={handleVehicleChange}>
                                                {SOURCE_COUNTRIES.map(c => <option key={c.code} value={c.code}>{c.flag} {c.name}</option>)}
                                            </select>
                                        </div>
                                        <div className="form-group">
                                            <label>FOB Value (USD)</label>
                                            <div className="input-wrapper">
                                                <span className="input-prefix">$</span>
                                                <input type="number" name="fob_usd" value={vehicleForm.fob_usd} onChange={handleVehicleChange} placeholder="15000" required />
                                            </div>
                                        </div>
                                    </div>

                                    {/* Departure Port (dynamic based on country) */}
                                    {currentPorts.length > 0 && (
                                        <div className="form-group">
                                            <label>Departure Port <span style={{fontWeight:400,textTransform:'none',letterSpacing:0}}>(optional)</span></label>
                                            <select name="departure_port" value={vehicleForm.departure_port} onChange={handleVehicleChange}>
                                                <option value="">Any available port</option>
                                                {currentPorts.map(p => (
                                                    <option key={p.code} value={p.code}>{p.name} ({p.transit_days.min}-{p.transit_days.max} days)</option>
                                                ))}
                                            </select>
                                        </div>
                                    )}

                                    {!['hybrid', 'electric', 'motorcycle'].includes(vehicleForm.vehicle_type) && (
                                        <div className="form-group">
                                            <label>Fuel Type</label>
                                            <div className="toggle-group">
                                                <label className={'toggle-option ' + (vehicleForm.fuel_type === 'gas' ? 'active' : '')}><input type="radio" name="fuel_type" value="gas" checked={vehicleForm.fuel_type === 'gas'} onChange={handleVehicleChange} />â›½ Gasoline</label>
                                                <label className={'toggle-option ' + (vehicleForm.fuel_type === 'diesel' ? 'active' : '')}><input type="radio" name="fuel_type" value="diesel" checked={vehicleForm.fuel_type === 'diesel'} onChange={handleVehicleChange} />ğŸ›¢ï¸ Diesel</label>
                                            </div>
                                        </div>
                                    )}

                                    <div className="form-row">
                                        {currentVehicleType?.requiresCC && (
                                            <div className="form-group">
                                                <label>Engine Size (CC)</label>
                                                <input type="number" name="engine_cc" value={vehicleForm.engine_cc} onChange={handleVehicleChange} placeholder="1800" required />
                                            </div>
                                        )}
                                        {currentVehicleType?.requiresWeight && (
                                            <div className="form-group">
                                                <label>Unladen Weight (KG)</label>
                                                <input type="number" name="unladen_weight_kg" value={vehicleForm.unladen_weight_kg} onChange={handleVehicleChange} placeholder="1850" required />
                                            </div>
                                        )}
                                    </div>

                                    {currentVehicleType?.requiresSeats && (
                                        <div className="form-group"><label>Passenger Seats</label><input type="number" name="passenger_seats" value={vehicleForm.passenger_seats} onChange={handleVehicleChange} placeholder="25" required /></div>
                                    )}

                                    {vehicleForm.vehicle_type === 'motorcycle' && (
                                        <div className="form-group">
                                            <label>Motorcycle Purpose</label>
                                            <div className="toggle-group">
                                                <label className={'toggle-option ' + (vehicleForm.motorcycle_purpose === 'leisure' ? 'active' : '')}><input type="radio" name="motorcycle_purpose" value="leisure" checked={vehicleForm.motorcycle_purpose === 'leisure'} onChange={handleVehicleChange} />ğŸï¸ Leisure</label>
                                                <label className={'toggle-option ' + (vehicleForm.motorcycle_purpose === 'goods' ? 'active' : '')}><input type="radio" name="motorcycle_purpose" value="goods" checked={vehicleForm.motorcycle_purpose === 'goods'} onChange={handleVehicleChange} />ğŸ“¦ Goods</label>
                                            </div>
                                        </div>
                                    )}

                                    <div className="form-group">
                                        <label>Vehicle Shipping Method</label>
                                        <div className="toggle-group">
                                            {VEHICLE_SHIPPING.map(m => (
                                                <label key={m.id} className={'toggle-option ' + (vehicleForm.vehicle_shipping_method === m.id ? 'active' : '')}><input type="radio" name="vehicle_shipping_method" value={m.id} checked={vehicleForm.vehicle_shipping_method === m.id} onChange={handleVehicleChange} />{m.icon} {m.name}</label>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Marine Insurance Type */}
                                    <div className="form-group">
                                        <label>Marine Insurance</label>
                                        <div className="toggle-group">
                                            {INSURANCE_OPTIONS.map(ins => (
                                                <label key={ins.id} className={'toggle-option ' + (vehicleForm.insurance_type === ins.id ? 'active' : '')}><input type="radio" name="insurance_type" value={ins.id} checked={vehicleForm.insurance_type === ins.id} onChange={handleVehicleChange} />{ins.icon} {ins.name}</label>
                                            ))}
                                        </div>
                                    </div>

                                    <div className="form-row">
                                        <div className="form-group">
                                            <label>Vehicle Age</label>
                                            <div className="toggle-group">
                                                <label className={'toggle-option ' + (vehicleForm.is_new ? 'active' : '')}><input type="radio" checked={vehicleForm.is_new} onChange={() => setVehicleForm(p => ({ ...p, is_new: true }))} />âœ¨ New (â‰¤3 yrs)</label>
                                                <label className={'toggle-option ' + (!vehicleForm.is_new ? 'active' : '')}><input type="radio" checked={!vehicleForm.is_new} onChange={() => setVehicleForm(p => ({ ...p, is_new: false }))} />ğŸ“… Used (>3 yrs)</label>
                                            </div>
                                        </div>
                                        {vehicleForm.vehicle_type === 'bus' && (
                                            <div className="form-group">
                                                <label>Importer Type</label>
                                                <div className="toggle-group">
                                                    <label className={'toggle-option ' + (!vehicleForm.is_franchise ? 'active' : '')}><input type="radio" checked={!vehicleForm.is_franchise} onChange={() => setVehicleForm(p => ({ ...p, is_franchise: false }))} />ğŸ‘¤ Individual</label>
                                                    <label className={'toggle-option ' + (vehicleForm.is_franchise ? 'active' : '')}><input type="radio" checked={vehicleForm.is_franchise} onChange={() => setVehicleForm(p => ({ ...p, is_franchise: true }))} />ğŸšŒ Franchise</label>
                                                </div>
                                            </div>
                                        )}
                                    </div>

                                    {vehicleForm.vehicle_type === 'electric' && <div className="info-box"><span>âš¡</span><div><strong>EV Incentives:</strong> New EVs enjoy just 11% aggregate duty with 0% GCT!</div></div>}
                                    {vehicleForm.vehicle_type === 'hybrid' && <div className="info-box"><span>ğŸ”‹</span><div><strong>Hybrid Incentive:</strong> 0% SCTA - only 39% aggregate duty.</div></div>}

                                    <button type="submit" className="btn btn-primary" disabled={loading}>{loading ? 'Calculating...' : 'ğŸ“Š Calculate Import Cost'}</button>
                                    {error && <div className="error-box"><strong>Error:</strong> {error}</div>}
                                </form>
                            ) : (
                                <form onSubmit={handleGoodsSubmit} className="form-grid">
                                    <div className="form-group">
                                        <label>Shipping From</label>
                                        <select name="origin_country" value={goodsForm.origin_country} onChange={handleGoodsChange}>
                                            {SOURCE_COUNTRIES.map(c => <option key={c.code} value={c.code}>{c.flag} {c.name}</option>)}
                                        </select>
                                    </div>
                                    <div className="form-row">
                                        <div className="form-group">
                                            <label>FOB Value (USD)</label>
                                            <div className="input-wrapper"><span className="input-prefix">$</span><input type="number" name="fob_usd" value={goodsForm.fob_usd} onChange={handleGoodsChange} placeholder="500" required /></div>
                                        </div>
                                        <div className="form-group"><label>Weight (KG)</label><input type="number" name="weight_kg" value={goodsForm.weight_kg} onChange={handleGoodsChange} placeholder="5" step="0.1" required /></div>
                                    </div>
                                    <div className="form-group">
                                        <label>Product Category</label>
                                        <select name="category" value={goodsForm.category} onChange={handleGoodsChange}>
                                            {categories.map(cat => <option key={cat.id} value={cat.id}>{cat.name} â€” {(cat.duty_rate * 100).toFixed(0)}% duty{cat.sct_rate > 0 ? ' + ' + (cat.sct_rate * 100).toFixed(0) + '% SCT' : ''}</option>)}
                                        </select>
                                    </div>
                                    <div className="form-group">
                                        <label>Shipping Method</label>
                                        <div className="toggle-group">
                                            <label className={'toggle-option ' + (goodsForm.shipping_method === 'air' ? 'active' : '')}><input type="radio" name="shipping_method" value="air" checked={goodsForm.shipping_method === 'air'} onChange={handleGoodsChange} />âœˆï¸ Air Freight</label>
                                            <label className={'toggle-option ' + (goodsForm.shipping_method === 'sea' ? 'active' : '')}><input type="radio" name="shipping_method" value="sea" checked={goodsForm.shipping_method === 'sea'} onChange={handleGoodsChange} />ğŸš¢ Sea Freight</label>
                                        </div>
                                    </div>
                                    <button type="submit" className="btn btn-primary" disabled={loading}>{loading ? 'Calculating...' : 'ğŸ“Š Calculate Import Cost'}</button>
                                    {error && <div className="error-box"><strong>Error:</strong> {error}</div>}
                                </form>
                            )}
                        </div>

                        <div className="card">
                            <div className="card-header"><h2 className="card-title">ğŸ“Š Cost Breakdown</h2></div>
                            {loading ? <div className="empty-state"><div className="spinner"></div><p>Calculating costs...</p></div> : result ? (
                                <>
                                    {result.is_de_minimis && <div className="info-box"><span>âœ“</span><div><strong>De Minimis Exemption!</strong> Items under $100 USD are duty-free.</div></div>}
                                    <div className="results-section">
                                        <div className="section-title">Base Costs</div>
                                        <div className="result-line"><span className="result-label">FOB Value</span><span className="result-value">{formatCurrency(result.fob_jmd)}</span></div>
                                        <div className="result-line"><span className="result-label">Freight {result.origin_country && <span className="rate-tag">from {result.origin_country}</span>}</span><span className="result-value">{formatCurrency(result.freight_jmd)}</span></div>

                                        {/* Enhanced freight breakdown */}
                                        {fb && fb.calculation_method && (
                                            <div className="freight-breakdown">
                                                <div className="freight-breakdown-title">
                                                    {result.shipping_method === 'roro' ? 'ğŸš¢ RoRo' : result.shipping_method?.includes('container') ? 'ğŸ“¦ Container' : result.shipping_method === 'air' ? 'âœˆï¸ Air' : 'ğŸš¢ Sea'} â€” {fb.calculation_method}
                                                </div>
                                                {fb.vehicle_name && fb.vehicle_m3 && <div className="freight-item" style={{color:'var(--primary-dark)',fontWeight:500}}><span>ğŸš˜ {fb.vehicle_name}</span><span>{fb.vehicle_m3} mÂ³{fb.vehicle_height_m ? ' â€¢ ' + fb.vehicle_height_m + 'm tall' : ''}</span></div>}
                                                <div style={{fontSize:'0.75rem',fontWeight:600,color:'var(--text-secondary)',margin:'0.5rem 0 0.25rem',textTransform:'uppercase',letterSpacing:'0.03em'}}>Origin Charges</div>
                                                {fb.base_freight > 0 && <div className="freight-item"><span>Base freight</span><span>${fb.base_freight}</span></div>}
                                                {fb.height_surcharge > 0 && <div className="freight-item"><span>Height surcharge</span><span>${fb.height_surcharge}</span></div>}
                                                {fb.port_adjustment !== 0 && fb.port_adjustment !== undefined && <div className="freight-item"><span>Port adjustment</span><span>{fb.port_adjustment >= 0 ? '+' : ''}${fb.port_adjustment}</span></div>}
                                                {fb.bunker_adjustment_factor > 0 && <div className="freight-item"><span>Bunker adj. (BAF)</span><span>${fb.bunker_adjustment_factor}</span></div>}
                                                {fb.bill_of_lading > 0 && <div className="freight-item"><span>Bill of Lading</span><span>${fb.bill_of_lading}</span></div>}
                                                {fb.origin_terminal_handling > 0 && <div className="freight-item"><span>Origin THC</span><span>${fb.origin_terminal_handling}</span></div>}
                                                {fb.low_sulphur_surcharge > 0 && <div className="freight-item"><span>Low sulphur surcharge</span><span>${fb.low_sulphur_surcharge}</span></div>}
                                                {fb.pre_shipment_inspection > 0 && <div className="freight-item"><span>Pre-shipment inspection (PSI)</span><span>${fb.pre_shipment_inspection}</span></div>}
                                                {fb.origin_subtotal > 0 && <div className="freight-subtotal"><span>Origin subtotal</span><span>${fb.origin_subtotal}</span></div>}
                                                <div style={{fontSize:'0.75rem',fontWeight:600,color:'var(--text-secondary)',margin:'0.5rem 0 0.25rem',textTransform:'uppercase',letterSpacing:'0.03em'}}>Jamaica Destination</div>
                                                {fb.wharfage > 0 && <div className="freight-item"><span>Wharfage</span><span>${fb.wharfage}</span></div>}
                                                {fb.port_handling > 0 && <div className="freight-item"><span>Port handling</span><span>${fb.port_handling}</span></div>}
                                                {fb.destination_terminal_handling > 0 && <div className="freight-item"><span>Destination THC</span><span>${fb.destination_terminal_handling}</span></div>}
                                                {fb.destination_subtotal > 0 && <div className="freight-subtotal"><span>Destination subtotal</span><span>${fb.destination_subtotal}</span></div>}
                                                {fb.insurance_premium > 0 && <div className="freight-item" style={{marginTop:'0.25rem'}}><span>ğŸ›¡ï¸ Insurance ({fb.insurance_type?.replace('_',' ')})</span><span>${fb.insurance_premium}</span></div>}
                                            </div>
                                        )}

                                        {/* Legacy freight breakdown for non-enhanced */}
                                        {fb && !fb.calculation_method && (
                                            <div className="freight-breakdown">
                                                <div className="freight-breakdown-title">{result.shipping_method === 'roro' ? 'ğŸš¢ RoRo' : result.shipping_method?.includes('container') ? 'ğŸ“¦ Container' : result.shipping_method === 'air' ? 'âœˆï¸ Air' : 'ğŸš¢ Sea'} Breakdown</div>
                                                {fb.base_freight !== undefined && <div className="freight-item"><span>Base freight</span><span>${fb.base_freight}</span></div>}
                                                {fb.terminal_handling && <div className="freight-item"><span>Terminal handling</span><span>${fb.terminal_handling}</span></div>}
                                                {fb.documentation && <div className="freight-item"><span>Documentation</span><span>${fb.documentation}</span></div>}
                                                {fb.fuel_surcharge && <div className="freight-item"><span>Fuel surcharge</span><span>${fb.fuel_surcharge}</span></div>}
                                                {fb.handling_fee && <div className="freight-item"><span>Handling</span><span>${fb.handling_fee}</span></div>}
                                            </div>
                                        )}

                                        <div className="result-line"><span className="result-label">Insurance</span><span className="result-value">{formatCurrency(result.insurance_jmd)}</span></div>
                                        <div className="result-line"><span className="result-label"><strong>CIF Total</strong></span><span className="result-value"><strong>{formatCurrency(result.cif_jmd)}</strong></span></div>
                                    </div>
                                    {!result.is_de_minimis && (
                                        <>
                                            <div className="results-section">
                                                <div className="section-title">Duties & Taxes</div>
                                                <div className="result-line"><span className="result-label">Import Duty <span className="rate-tag">{(result.duty_rate * 100).toFixed(0)}%</span></span><span className="result-value">{formatCurrency(result.duty_jmd)}</span></div>
                                                {result.scta_jmd > 0 && <div className="result-line"><span className="result-label">SCTA <span className="rate-tag">{(result.scta_rate * 100).toFixed(0)}%</span></span><span className="result-value">{formatCurrency(result.scta_jmd)}</span></div>}
                                                <div className="result-line"><span className="result-label">GCT <span className="rate-tag">{(result.gct_rate * 100).toFixed(0)}%</span></span><span className="result-value">{formatCurrency(result.gct_jmd)}</span></div>
                                            </div>
                                            <div className="results-section">
                                                <div className="section-title">Administrative Fees</div>
                                                <div className="result-line"><span className="result-label">CAF</span><span className="result-value">{formatCurrency(result.caf_jmd)}</span></div>
                                                <div className="result-line"><span className="result-label">SCF</span><span className="result-value">{formatCurrency(result.scf_jmd)}</span></div>
                                                <div className="result-line"><span className="result-label">Environmental Levy</span><span className="result-value">{formatCurrency(result.epl_jmd)}</span></div>
                                                <div className="result-line"><span className="result-label">Stamp Duty</span><span className="result-value">{formatCurrency(result.stamp_duty_jmd)}</span></div>
                                            </div>
                                        </>
                                    )}
                                    <div className="highlight-box">
                                        <div className="highlight-label">Total Landed Cost</div>
                                        <div className="highlight-amount">{formatCurrency(result.total_landed_jmd)}</div>
                                        <div className="highlight-sub">{formatCurrency(result.total_landed_jmd / result.exchange_rate_used, 'USD')}</div>
                                        {result.aggregate_rate && <div className="aggregate-badge">ğŸ“Š Aggregate Rate: {(result.aggregate_rate * 100).toFixed(0)}%</div>}
                                        {fb && fb.transit_days_min && fb.transit_days_max && (
                                            <div className="transit-badge" style={{marginTop:'0.75rem',background:'rgba(254,209,0,0.12)',color:'var(--accent)'}}>â±ï¸ Est. Transit: {fb.transit_days_min}-{fb.transit_days_max} days (port-to-port)</div>
                                        )}
                                    </div>
                                </>
                            ) : <div className="empty-state"><div className="empty-icon">ğŸ“‹</div><p>Enter {activeTab === 'vehicle' ? 'vehicle' : 'shipment'} details to see cost breakdown</p></div>}
                        </div>
                    </div>
                    )}

                    {activeTab === 'hscodes' && <HSCodeSearch />}
                    {activeTab === 'vessels' && <VesselTracker />}

                    <footer className="footer">
                        <p><strong>Exchange Rate:</strong> 155.0 JMD/USD â€¢ <strong>CAF:</strong> J$63,250 (new) / J$66,125 (used) â€¢ Updated Feb 2025</p>
                        <p style={{ marginTop: '0.5rem' }}>Freight rates are estimates based on 2025 industry averages. M3-tiered rates for JP/CN/KR/AE; flat-rate for US/UK/DE/CA/PA/TT.</p>
                        <p style={{ marginTop: '0.5rem' }}>For official rates, visit <a href="https://www.jacustoms.gov.jm" target="_blank" rel="noopener noreferrer">Jamaica Customs Agency</a></p>
                    </footer>
                </div>
            );
        }
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
